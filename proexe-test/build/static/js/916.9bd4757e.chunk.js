"use strict";(self.webpackChunkproexe_test=self.webpackChunkproexe_test||[]).push([[916],{5916:function(e,r,n){n.r(r);var t=n(4942),a=n(1413),s=n(5861),c=n(885),i=n(7757),u=n.n(i),o=n(2791),l=n(1757),d=n(364),p=n(6871),m=n(9202),f=n(5705),h=n(6006),v=n(184),x=h.Ry().shape({name:h.Z_().required("Name is required"),username:h.Z_().required("Username is required"),email:h.Z_().email("Enter a valid email").required("Email is required"),city:h.Z_().required("City is required")});r.default=(0,d.$j)((function(e){return{userProps:e.user}}))((function(e){var r=(0,p.bS)("users/:id"),n=(0,p.s0)(),i=e.userProps.users,h=(0,d.I0)(),y=(0,o.useState)({fetching:!1,processing:!1}),b=(0,c.Z)(y,2),j=b[0],g=b[1],w=(0,o.useState)({name:"",email:"",username:"",city:""}),Z=(0,c.Z)(w,2),N=Z[0],k=Z[1];(0,o.useEffect)((function(){U()}),[]);var U=function(){var e=(0,s.Z)(u().mark((function e(){var n,t,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(null===r||void 0===r?void 0:r.params.id)||"",t=[],e.prev=2,i.length){e.next=11;break}return e.next=6,m.Z.getUserById(n);case 6:(a=e.sent).city=a.address.city,t=[a],e.next=12;break;case 11:t=i;case 12:if(e.prev=12,!(s=t.find((function(e){var r;return(null===(r=e.id)||void 0===r?void 0:r.toString())===n.toString()})))){e.next=16;break}return e.abrupt("return",k(s));case 16:throw new Error("Invalid ID");case 18:case"end":return e.stop()}}),e,null,[[2,,12,18]])})));return function(){return e.apply(this,arguments)}}(),B=function(e){var r=e.target,n=r.name,s=r.value;k((0,a.Z)((0,a.Z)({},N),{},(0,t.Z)({},n,s)))},C=function(){var e=(0,s.Z)(u().mark((function e(){var t,s,c,i,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g((0,a.Z)((0,a.Z)({},j),{},{processing:!0})),t=N.email,s=N.name,c=N.username,i=N.city,o={id:null===r||void 0===r?void 0:r.params.id,email:t,city:i,name:s,username:c},e.prev=3,e.next=6,m.Z.updateUser(o);case 6:h((0,l.Nq)(o)),n("/users"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.error({err:e.t0});case 13:return e.prev=13,g((0,a.Z)((0,a.Z)({},j),{},{processing:!1})),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[3,10,13,16]])})));return function(){return e.apply(this,arguments)}}();return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("div",{className:"card",children:(0,v.jsx)(f.J9,{initialValues:N,enableReinitialize:!0,validationSchema:x,onSubmit:C,children:function(e){var r=e.errors,t=e.touched,a=e.handleChange,s=e.handleSubmit,c=e.handleBlur,i=e.values;return(0,v.jsxs)("form",{className:"needs-validation",onSubmit:s,noValidate:!0,children:[(0,v.jsx)("div",{className:"card-header",children:(0,v.jsx)("b",{children:"Edit user form"})}),(0,v.jsx)("div",{className:"card-body",children:(0,v.jsxs)("div",{className:"row gy-4 row-cols-1",children:[(0,v.jsxs)("div",{className:"col",children:[(0,v.jsxs)("label",{htmlFor:"editName",children:["Name",(0,v.jsx)("span",{className:"text-danger",children:"*"})]}),(0,v.jsx)("input",{id:"editName",onBlur:c,onChange:function(e){B(e),a(e)},type:"text",name:"name",value:i.name,className:"form-control ".concat(t.name&&r.name&&"has-error")}),(0,v.jsx)("small",{className:"text-danger",children:t.name&&r.name})]}),(0,v.jsxs)("div",{className:"col",children:[(0,v.jsxs)("label",{htmlFor:"editUsername",children:["Username",(0,v.jsx)("span",{className:"text-danger",children:"*"})]}),(0,v.jsx)("input",{id:"editUsername",type:"text",onBlur:c,onChange:function(e){B(e),a(e)},name:"username",value:i.username,className:"form-control ".concat(t.username&&r.username&&"has-error")}),(0,v.jsx)("small",{className:"text-danger",children:t.username&&r.username})]}),(0,v.jsxs)("div",{className:"col",children:[(0,v.jsxs)("label",{htmlFor:"editEmail",children:["Email",(0,v.jsx)("span",{className:"text-danger",children:"*"})]}),(0,v.jsx)("input",{id:"editEmail",type:"text",onBlur:c,onChange:function(e){B(e),a(e)},name:"email",value:i.email,className:"form-control ".concat(t.email&&r.email&&"has-error")}),(0,v.jsx)("small",{className:"text-danger",children:t.email&&r.email})]}),(0,v.jsxs)("div",{className:"col",children:[(0,v.jsxs)("label",{htmlFor:"editCity",children:["City",(0,v.jsx)("span",{className:"text-danger",children:"*"})]}),(0,v.jsx)("input",{id:"editCity",type:"text",onBlur:c,onChange:function(e){B(e),a(e)},name:"city",value:i.city,className:"form-control ".concat(t.city&&r.city&&"has-error")}),(0,v.jsx)("small",{className:"text-danger",children:t.city&&r.city})]})]})}),(0,v.jsx)("div",{className:"card-footer",children:(0,v.jsxs)("div",{className:"float-end",children:[(0,v.jsx)("button",{className:"btn btn-outline-danger m-2",onClick:function(){return n("/users")},children:"Cancel"}),(0,v.jsxs)("button",{className:"btn btn-".concat("primary"),type:"submit",disabled:j.processing,children:["Submit",j.processing&&(0,v.jsx)("i",{className:"spinner"})]})]})})]})}})})})}))},9202:function(e,r,n){n.d(r,{Z:function(){return y}});var t=n(5861),a=n(3144),s=n(5671),c=n(136),i=n(3668),u=n(7757),o=n.n(u),l=n(4569),d=n.n(l),p=n(9142),m="production",f={development:{apiBaseUrl:"https://my-json-server.typicode.com/karolkproexe/jsonplaceholderdb"},production:{apiBaseUrl:"https://my-json-server.typicode.com/karolkproexe/jsonplaceholderdb"},test:{apiBaseUrl:"https://my-json-server.typicode.com/karolkproexe/jsonplaceholderdb"}}[m.trim()],h=function(e){var r=e.response;return r||(r={data:{message:"Server unvailable, please try again.",statusCode:p.MS.serverUnavailable}}),r.data&&r.data.error&&(r.data.message=r.data.error),r},v=(0,a.Z)((function e(){var r=this;(0,s.Z)(this,e),this.apiBaseUrl=f.apiBaseUrl,this.get=function(){var e=(0,t.Z)(o().mark((function e(n,t){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(r.apiBaseUrl,"/").concat(n),a=t?"".concat(a,"/").concat(t):a,e.abrupt("return",d().get(a).then((function(e){return e.data})).catch((function(e){throw h(e).data})));case 3:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}(),this.post=function(){var e=(0,t.Z)(o().mark((function e(n,t){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(r.apiBaseUrl,"/").concat(n),e.abrupt("return",d().post(a,t).then((function(e){return e.data})).catch((function(e){throw h(e).data})));case 2:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}(),this.put=function(){var e=(0,t.Z)(o().mark((function e(n,t){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(r.apiBaseUrl,"/").concat(n),e.abrupt("return",d().put(a,t).then((function(e){return e.data})).catch((function(e){throw h(e).data})));case 2:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}(),this.patch=function(){var e=(0,t.Z)(o().mark((function e(n){var t,a,s=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>1&&void 0!==s[1]?s[1]:null,a="".concat(r.apiBaseUrl,"/").concat(n),e.abrupt("return",d().patch(a,t).then((function(e){return e.data})).catch((function(e){throw h(e).data})));case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),this.del=function(){var e=(0,t.Z)(o().mark((function e(n){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(r.apiBaseUrl,"/").concat(n),e.abrupt("return",d().delete(t).then((function(e){return e.data})).catch((function(e){throw h(e).data})));case 2:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()})),x=function(e){(0,c.Z)(n,e);var r=(0,i.Z)(n);function n(){var e;(0,s.Z)(this,n);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(e=r.call.apply(r,[this].concat(c))).entityUrl="data",e.getAllUsers=(0,t.Z)(o().mark((function r(){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",e.get(e.entityUrl));case 1:case"end":return r.stop()}}),r)}))),e.getUserById=function(){var r=(0,t.Z)(o().mark((function r(n){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",e.get(e.entityUrl,n));case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),e.createUser=function(){var r=(0,t.Z)(o().mark((function r(n){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",e.post(e.entityUrl,n));case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),e.updateUser=function(){var r=(0,t.Z)(o().mark((function r(n){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",e.put("".concat(e.entityUrl,"/").concat(n.id),n));case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),e.deleteUser=function(){var r=(0,t.Z)(o().mark((function r(n){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",e.del("".concat(e.entityUrl,"/").concat(n.id)));case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),e}return(0,a.Z)(n)}(v),y=new x},1757:function(e,r,n){n.d(r,{HM:function(){return a},cn:function(){return s},Nq:function(){return c},kX:function(){return i},nY:function(){return u}});var t=n(2398),a=function(e){return{type:t.b1,payload:e}},s=function(e){return{type:t.jN,payload:e}},c=function(e){return{type:t.AX,payload:e}},i=function(e){return{type:t.g4,payload:e}},u=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"username";return{type:e,payload:r}}}}]);
//# sourceMappingURL=916.9bd4757e.chunk.js.map